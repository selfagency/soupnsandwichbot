#!/usr/bin/env node
!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){r(1),e.exports=r(2)},function(e,t){e.exports=require("babel-polyfill")},function(e,t,r){var n=this,o=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){var e=p(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=Promise,e.next=4,y("https://en.wikipedia.org/wiki/List_of_soups");case 4:return e.t1=e.sent,e.next=7,y("https://en.wikipedia.org/wiki/List_of_sandwiches");case 7:return e.t2=e.sent,e.t3=[e.t1,e.t2],e.abrupt("return",e.t0.all.call(e.t0,e.t3));case 12:throw e.prev=12,e.t4=e.catch(0),e.t4;case 15:case"end":return e.stop()}},e,this,[[0,12]])}));return function(){return e.apply(this,arguments)}}(),u=function(){var e=p(regeneratorRuntime.mark(function e(t){var r,n,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r=new RegExp(/(?:\.)([0-9a-z]+$)/),n=void 0,o=void 0,!d.str(t)){e.next=21;break}if(n=r.exec(t),d.bad(n)){e.next=9;break}n=n[1].toLowerCase(),e.next=10;break;case 9:return e.abrupt("return",null);case 10:if(!d.str(n)){e.next=18;break}if(t=t.replace(/thumb\//g,"").replace(/(\/\d*px-)/g,"/").replace(/\/[a-zA-Z0-9%$!#^&()_.-]*.{3,4}$/,""),o="./img/"+t.replace(/\/|\./g,"_")+"."+n,!m.existsSync(o)){e.next=15;break}return e.abrupt("return",o);case 15:return e.abrupt("return",f({responseType:"stream",url:"https://"+t,method:"get"}).then(function(e){return console.log("filename: "+(void 0===o?"undefined":a(o))+" "+o),e.data.pipe(m.createWriteStream(o)),o}));case 18:return e.abrupt("return",null);case 19:e.next=22;break;case 21:return e.abrupt("return",null);case 22:e.next=27;break;case 24:throw e.prev=24,e.t0=e.catch(0),e.t0;case 27:case"end":return e.stop()}},e,this,[[0,24]])}));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=p(regeneratorRuntime.mark(function e(t){var r,n,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=[],e.prev=1,n=0;case 3:if(!(n<=t.length)){e.next=18;break}if(n!==t.length){e.next=6;break}return e.abrupt("return",r);case 6:if(o=t[n],console.log("stream: "+o),d.bad(o)){e.next=15;break}return console.log("file exists: "+m.existsSync(o)),e.next=12,g.post("media",{file:m.createReadStream(o)});case 12:a=e.sent,console.log(JSON.stringify(a.data)),/missing/g.test(a.data.url)?r.push(void 0):r.push(a.data.id);case 15:n++,e.next=3;break;case 18:e.next=23;break;case 20:throw e.prev=20,e.t0=e.catch(1),e.t0;case 23:case"end":return e.stop()}},e,this,[[1,20]])}));return function(t){return e.apply(this,arguments)}}(),c=function(){var e=p(regeneratorRuntime.mark(function e(t,r){var n,a,i,f,l,m,h,v,x,b,y,S,R,_=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=w(t),a=o(n,2),i=a[0],f=a[1],l=w(r),m=o(l,2),h=m[0],v=m[1],x=[f,v],e.next=6,Promise.all([u(x[0]),u(x[1])]);case 6:return b=e.sent,console.log("imgOut: "+b),e.next=10,s(b);case 10:return y=e.sent,console.log("media_ids: "+y),S="ðŸ¥£  "+k(i.Name)+(d.bad(i.Origin)?"":" ["+k(i.Origin)+"]")+" n' ðŸ¥ª  "+k(h.Name)+(d.bad(h.Origin)?"":" ["+k(h.Origin)+"]"),console.log("status: "+S),e.next=16,g.post("statuses",{status:S,media_ids:y});case 16:R=e.sent,/error/.test(R.data)&&console.log(R.data),setTimeout(p(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(t,r);case 2:case"end":return e.stop()}},e,_)})),432e5),e.next=24;break;case 21:throw e.prev=21,e.t0=e.catch(0),e.t0;case 24:case"end":return e.stop()}},e,this,[[0,21]])}));return function(t,r){return e.apply(this,arguments)}}();function p(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(o,a){try{var i=t[o](a),u=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(u).then(function(e){n("next",e)},function(e){n("throw",e)});e(u)}("next")})}}r(3).config();var f=r(4),l=r(5).XmlEntities,m=r(6),d=r(7),h=r(8),v=r(9),x=r(10),b=new l,g=new h({access_token:process.env.ACCESS_TOKEN,api_url:"https://bofa.lol/api/v1/"});function y(e){var t=this;try{return new Promise(function(){var r=p(regeneratorRuntime.mark(function r(n,o){var a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.get(e);case 2:a=(a=t.sent).data,a=x.convert(a,{stripHtmlFromCells:!1,stripHtmlFromHeadings:!0}),/error/.test(a)&&o(a),n(a[0]);case 7:case"end":return t.stop()}},r,t)}));return function(e,t){return r.apply(this,arguments)}}())}catch(e){throw e}}function w(e){var t=new RegExp(/(?:src=\"\/\/)(.*?)(?:\")/g);try{var r=e[Math.floor(Math.random()*e.length)],n=t.exec(r.Image);return[r,d.bad(n)?null:n[1]]}catch(e){throw e}}function k(e){return v(b.decode(e).replace(/\[.*\]/,"").replace(/\n/,""))}p(regeneratorRuntime.mark(function e(){var t,r,a,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i();case 3:return t=e.sent,r=o(t,2),a=r[0],u=r[1],e.next=9,c(a,u);case 9:e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(0),e.t0;case 14:case"end":return e.stop()}},e,n,[[0,11]])}))()},function(e,t){e.exports=require("dotenv")},function(e,t){e.exports=require("axios")},function(e,t){e.exports=require("html-entities")},function(e,t){e.exports=require("fs")},function(e,t){e.exports=require("typa")},function(e,t){e.exports=require("mastodon-api")},function(e,t){e.exports=require("striptags")},function(e,t){e.exports=require("tabletojson")}]);
//# sourceMappingURL=index.js.map